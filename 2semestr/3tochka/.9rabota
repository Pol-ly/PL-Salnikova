import java.util.HashMap;
import java.util.Map;
public class Main{
    public static void main(String[] args){
        String Text = "Но некоторые особенности внутренней политики представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и должны быть объединены в целые кластеры себе подобных. Равным образом, консультация с широким активом, в своём классическом представлении, допускает внедрение поставленных обществом задач. Кстати, диаграммы связей заблокированы в рамках своих собственных рациональных ограничений. Внезапно, реплицированные с зарубежных источников, современные исследования призваны к ответу.\n" +
                "\n" +
                "Приятно, граждане, наблюдать, как представители современных социальных резервов ассоциативно распределены по отраслям. Современные технологии достигли такого уровня, что реализация намеченных плановых заданий однозначно определяет каждого участника как способного принимать собственные решения касаемо экспериментов, поражающих по своей масштабности и грандиозности.\n" +
                "\n" +
                "С учётом сложившейся международной обстановки, синтетическое тестирование позволяет выполнить важные задания по разработке экспериментов, поражающих по своей масштабности и грандиозности. Идейные соображения высшего порядка, а также разбавленное изрядной долей эмпатии, рациональное мышление напрямую зависит от поэтапного и последовательного развития общества. Но высокое качество позиционных исследований требует анализа системы обучения кадров, соответствующей насущным потребностям. Наше дело не так однозначно, как может показаться: разбавленное изрядной долей эмпатии, рациональное мышление выявляет срочную потребность укрепления моральных ценностей.\n" +
                "\n" +
                "Противоположная точка зрения подразумевает, что реплицированные с зарубежных источников, современные исследования описаны максимально подробно. Как уже неоднократно упомянуто, диаграммы связей, вне зависимости от их уровня, должны быть представлены в исключительно положительном свете. С учётом сложившейся международной обстановки, понимание сути ресурсосберегающих технологий выявляет срочную потребность поставленных обществом задач. В рамках спецификации современных стандартов, элементы политического процесса описаны максимально подробно.\n" +
                "\n" +
                "Мы вынуждены отталкиваться от того, что постоянное информационно-пропагандистское обеспечение нашей деятельности способствует подготовке и реализации форм воздействия. Задача организации, в особенности же высокотехнологичная концепция общественного уклада создаёт предпосылки для поставленных обществом задач. Являясь всего лишь частью общей картины, некоторые особенности внутренней политики формируют глобальную экономическую сеть и при этом — смешаны с не уникальными данными до степени совершенной неузнаваемости, из-за чего возрастает их статус бесполезности. Задача организации, в особенности же высококачественный прототип будущего проекта в значительной степени обусловливает важность соответствующих условий активизации. В целом, конечно, постоянное информационно-пропагандистское обеспечение нашей деятельности однозначно фиксирует необходимость поставленных обществом задач! Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: высокотехнологичная концепция общественного уклада представляет собой интересный эксперимент проверки благоприятных перспектив.\n" +
                "\n" +
                "Имеется спорная точка зрения, гласящая примерно следующее: ключевые особенности структуры проекта, превозмогая сложившуюся непростую экономическую ситуацию, превращены в посмешище, хотя само их существование приносит несомненную пользу обществу. Прежде всего, базовый вектор развития обеспечивает актуальность приоретизации разума над эмоциями. Банальные, но неопровержимые выводы, а также представители современных социальных резервов заблокированы в рамках своих собственных рациональных ограничений.\n" +
                "\n" +
                "Прежде всего, высокое качество позиционных исследований, в своём классическом представлении, допускает внедрение модели развития. С учётом сложившейся международной обстановки, начало повседневной работы по формированию позиции позволяет выполнить важные задания по разработке новых принципов формирования материально-технической и кадровой базы. Как принято считать, тщательные исследования конкурентов освещают чрезвычайно интересные особенности картины в целом, однако конкретные выводы, разумеется, объединены в целые кластеры себе подобных. Лишь акционеры крупнейших компаний освещают чрезвычайно интересные особенности картины в целом, однако конкретные выводы, разумеется, ограничены исключительно образом мышления.\n" +
                "\n" +
                "Господа, разбавленное изрядной долей эмпатии, рациональное мышление предполагает независимые способы реализации благоприятных перспектив. Как принято считать, тщательные исследования конкурентов, инициированные исключительно синтетически, подвергнуты целой серии независимых исследований. Есть над чем задуматься: сделанные на базе интернет-аналитики выводы представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и должны быть функционально разнесены на независимые элементы. Повседневная практика показывает, что семантический разбор внешних противодействий говорит о возможностях системы массового участия. Как принято считать, реплицированные с зарубежных источников, современные исследования формируют глобальную экономическую сеть и при этом — смешаны с не уникальными данными до степени совершенной неузнаваемости, из-за чего возрастает их статус бесполезности!\n" +
                "\n" +
                "Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: дальнейшее развитие различных форм деятельности требует от нас анализа инновационных методов управления процессами. Но дальнейшее развитие различных форм деятельности способствует подготовке и реализации кластеризации усилий. И нет сомнений, что сторонники тоталитаризма в науке освещают чрезвычайно интересные особенности картины в целом, однако конкретные выводы, разумеется, рассмотрены исключительно в разрезе маркетинговых и финансовых предпосылок. Также как дальнейшее развитие различных форм деятельности говорит о возможностях дальнейших направлений развития.\n" +
                "\n" +
                "Идейные соображения высшего порядка, а также новая модель организационной деятельности требует от нас анализа системы массового участия. Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: семантический разбор внешних противодействий создаёт необходимость включения в производственный план целого ряда внеочередных мероприятий с учётом комплекса стандартных подходов. Каждый из нас понимает очевидную вещь: постоянное информационно-пропагандистское обеспечение нашей деятельности однозначно определяет каждого участника как способного принимать собственные решения касаемо кластеризации усилий. Имеется спорная точка зрения, гласящая примерно следующее: базовые сценарии поведения пользователей и по сей день остаются уделом либералов, которые жаждут быть объективно рассмотрены соответствующими инстанциями.\n" +
                "\n" +
                "Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: граница обучения кадров однозначно определяет каждого участника как способного принимать собственные решения касаемо дальнейших направлений развития. В рамках спецификации современных стандартов, акционеры крупнейших компаний неоднозначны и будут в равной степени предоставлены сами себе. Ясность нашей позиции очевидна: семантический разбор внешних противодействий однозначно фиксирует необходимость новых предложений. Безусловно, повышение уровня гражданского сознания предполагает независимые способы реализации приоретизации разума над эмоциями. Повседневная практика показывает, что экономическая повестка сегодняшнего дня создаёт необходимость включения в производственный план целого ряда внеочередных мероприятий с учётом комплекса позиций, занимаемых участниками в отношении поставленных задач.\n" +
                "\n" +
                "Наше дело не так однозначно, как может показаться: сложившаяся структура организации способствует подготовке и реализации переосмысления внешнеэкономических политик. В целом, конечно, глубокий уровень погружения требует определения и уточнения вывода текущих активов. В частности, внедрение современных методик создаёт необходимость включения в производственный план целого ряда внеочередных мероприятий с учётом комплекса анализа существующих паттернов поведения.\n" +
                "\n" +
                "Учитывая ключевые сценарии поведения, глубокий уровень погружения напрямую зависит от поэтапного и последовательного развития общества. Приятно, граждане, наблюдать, как явные признаки победы институционализации, инициированные исключительно синтетически, превращены в посмешище, хотя само их существование приносит несомненную пользу обществу. Противоположная точка зрения подразумевает, что интерактивные прототипы в равной степени предоставлены сами себе.\n" +
                "\n" +
                "Внезапно, интерактивные прототипы, превозмогая сложившуюся непростую экономическую ситуацию, описаны максимально подробно. Ясность нашей позиции очевидна: дальнейшее развитие различных форм деятельности позволяет оценить значение новых принципов формирования материально-технической и кадровой базы. Задача организации, в особенности же постоянный количественный рост и сфера нашей активности однозначно определяет каждого участника как способного принимать собственные решения касаемо благоприятных перспектив. Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: сплочённость команды профессионалов не даёт нам иного выбора, кроме определения новых предложений.\n" +
                "\n" +
                "Противоположная точка зрения подразумевает, что некоторые особенности внутренней политики формируют глобальную экономическую сеть и при этом — объявлены нарушающими общечеловеческие нормы этики и морали! Не следует, однако, забывать, что повышение уровня гражданского сознания предопределяет высокую востребованность благоприятных перспектив. Наше дело не так однозначно, как может показаться: постоянное информационно-пропагандистское обеспечение нашей деятельности прекрасно подходит для реализации новых принципов формирования материально-технической и кадровой базы.";
        String shifr = "Хц рцнцхуб ртцнрцхубцо внууцнноц пцлцтцкц прцдстцвлют сцбцй ну что цно, кк хвцнтэссунуцю пцбуды мкркутцнгк нкд ркзумцм ц дцлжны быть цбъудцннуы в уунуу клкстуры субу пцдцбных. Рквиым цбркзцм, кцнсульткцц с шцрцкцм кктцвцм, в своёц клкссцчусюцм прудстквлцнцц, дцпусккт внудрунцу постквлцнных цбщуствцм ккдкч. Хктк, дцкгркммы свяууй зкблцкцвкны в ркмккх своцх сцбствунных ркцццкнльных цгркнцчунцй. Внудкпно, рцулцццрквкнные с зкрубужных цстчунцкцв, сцврцуунныу цслудквкнця прцзвкны к цтвут.";
        Map<Character, Integer> chastota = chastota1(Text);
        Map<Character, Integer> chastota2 = chastota1(shifr);
        int sdvig = sdvig1(chastota, chastota2);
        String noShifr = noShifr1(shifr, sdvig);
        System.out.println("Предполагаемый сдвиг: " + sdvig);
        System.out.println("\nРасшифрованный текст:");
        System.out.println(noShifr);
    }
    private static Map<Character, Integer> chastota1(String text){
        Map<Character, Integer> chastota = new HashMap<>();
        for (char c : text.toLowerCase().toCharArray()){
            if (Character.isLetter(c)) {
                chastota.put(c, chastota.getOrDefault(c, 0) + 1);
            }
        }
        return chastota;
    }
    private static int sdvig1(Map<Character, Integer> rFreq, Map<Character, Integer> eFreq) {
        char reference = Frequent(rFreq);
        char encrypted = Frequent(eFreq);
        int sdvig = encrypted - reference;
        if (sdvig < 0){
            sdvig += 33;
        }
        return sdvig;
    }
    private static char Frequent(Map<Character, Integer> chastota){
        char mFreq = ' ';
        int maxCount = 0;
        for (Map.Entry<Character, Integer> entry : chastota.entrySet()){
            if (entry.getValue() > maxCount){
                maxCount = entry.getValue();
                mFreq = entry.getKey();
           }
        }
        return mFreq;
    }
    private static String noShifr1(String text, int sdvig){
        StringBuilder d = new StringBuilder();
        for (char c : text.toCharArray()){
            if (Character.isLetter(c)){
                boolean isUpper = Character.isUpperCase(c);
                char lowerC = Character.toLowerCase(c);
                char dChar = (char) (((lowerC - 'а' - sdvig + 33) % 33) + 'а');
                if (isUpper){
                    dChar = Character.toUpperCase(dChar);
                }
                d.append(dChar);
            } 
            else{
                d.append(c);
            }
        }
        return d.toString();
    }
}
